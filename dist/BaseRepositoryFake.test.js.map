{"version":3,"sources":["../dist-esnext/BaseRepositoryFake.test.js"],"names":["BaseRepositoryFake","collectionName","db","repository","describe","beforeEach","createRepository","it","entity","name","save","entities","id","dbEntity","getById","entity1","entity2","dbEntities","getByIds","length","find","limit","dbCollectionName","getDbCollection"],"mappings":";;AAAA;;AACA;;IAAYA,kB;;;;AACZ,MAAMC,iBAAiB,MAAvB;AACA,MAAMC,KAAK,QAAX;AACA,IAAIC,UAAJ;AACAC,SAAS,oBAAT,EAA+B,MAAM;AACjCC,eAAW,EAAX,EAAe,MAAM;AACjBF,qBAAaH,mBAAmBM,gBAAnB,CAAoCL,cAApC,EAAoDC,EAApD,CAAb;AACH,KAFD;AAGAK,OAAG,2BAAH,EAAgC,MAAM;AAClC,8BAAMJ,WAAWF,cAAjB,EAAiCA,cAAjC,EAAiD,uBAAjD;AACA,8BAAME,WAAWD,EAAjB,EAAqBA,EAArB,EAAyB,UAAzB;AACH,KAHD;AAIAK,OAAG,MAAH,EAAW,MAAM;AACb,cAAMC,SAAS;AACXC,kBAAM;AADK,SAAf;AAGAN,mBAAWO,IAAX,CAAgBF,MAAhB;AACA,8BAAMR,mBAAmBW,QAAnB,CAA4B,CAA5B,CAAN,EAAsCH,MAAtC;AACH,KAND;AAOAD,OAAG,SAAH,EAAc,YAAY;AACtB,cAAMC,SAAS;AACXI,gBAAI,QADO;AAEXH,kBAAM;AAFK,SAAf;AAIAN,mBAAWO,IAAX,CAAgBF,MAAhB;AACA,cAAMK,WAAW,MAAMV,WAAWW,OAAX,CAAmBN,OAAOI,EAA1B,CAAvB;AACA,8BAAMC,QAAN,EAAgBL,MAAhB;AACH,KARD;AASAD,OAAG,UAAH,EAAe,YAAY;AACvB,cAAMQ,UAAU;AACZH,gBAAI,QADQ;AAEZH,kBAAM;AAFM,SAAhB;AAIAN,mBAAWO,IAAX,CAAgBK,OAAhB;AACA,cAAMC,UAAU;AACZJ,gBAAI,SADQ;AAEZH,kBAAM;AAFM,SAAhB;AAIAN,mBAAWO,IAAX,CAAgBM,OAAhB;AACA,cAAMC,aAAa,MAAMd,WAAWe,QAAX,CAAoB,CAACH,QAAQH,EAAT,EAAaI,QAAQJ,EAArB,CAApB,CAAzB;AACA,8BAAMK,WAAWE,MAAjB,EAAyB,CAAzB;AACH,KAbD;AAcAZ,OAAG,MAAH,EAAW,YAAY;AACnB,cAAMQ,UAAU;AACZH,gBAAI,QADQ;AAEZH,kBAAM;AAFM,SAAhB;AAIAN,mBAAWO,IAAX,CAAgBK,OAAhB;AACA,cAAMC,UAAU;AACZJ,gBAAI,SADQ;AAEZH,kBAAM;AAFM,SAAhB;AAIAN,mBAAWO,IAAX,CAAgBM,OAAhB;AACA,cAAMC,aAAa,MAAMd,WAAWiB,IAAX,CAAgB,EAAhB,EAAoB,EAAEC,OAAO,CAAT,EAApB,CAAzB;AACA,8BAAMJ,WAAWE,MAAjB,EAAyB,CAAzB;AACH,KAbD;AAcAZ,OAAG,iBAAH,EAAsB,MAAM;AACxB,cAAMe,mBAAmBtB,mBAAmBuB,eAAnB,EAAzB;AACA,8BAAMD,iBAAiBrB,cAAvB,EAAuCA,cAAvC;AACH,KAHD;AAIH,CAxDD;AAyDA","file":"BaseRepositoryFake.test.js","sourcesContent":["import { equal } from 'ptz-assert';\r\nimport * as BaseRepositoryFake from './index';\r\nconst collectionName = 'test';\r\nconst db = 'fakeDb';\r\nlet repository;\r\ndescribe('BaseRepositoryFake', () => {\r\n    beforeEach('', () => {\r\n        repository = BaseRepositoryFake.createRepository(collectionName, db);\r\n    });\r\n    it('set collectionName and db', () => {\r\n        equal(repository.collectionName, collectionName, 'wrong collectionsName');\r\n        equal(repository.db, db, 'wrong db');\r\n    });\r\n    it('save', () => {\r\n        const entity = {\r\n            name: 'entity'\r\n        };\r\n        repository.save(entity);\r\n        equal(BaseRepositoryFake.entities[0], entity);\r\n    });\r\n    it('getById', async () => {\r\n        const entity = {\r\n            id: 'testid',\r\n            name: 'entity'\r\n        };\r\n        repository.save(entity);\r\n        const dbEntity = await repository.getById(entity.id);\r\n        equal(dbEntity, entity);\r\n    });\r\n    it('getByIds', async () => {\r\n        const entity1 = {\r\n            id: 'testid',\r\n            name: 'entity1'\r\n        };\r\n        repository.save(entity1);\r\n        const entity2 = {\r\n            id: 'testid1',\r\n            name: 'entity2'\r\n        };\r\n        repository.save(entity2);\r\n        const dbEntities = await repository.getByIds([entity1.id, entity2.id]);\r\n        equal(dbEntities.length, 2);\r\n    });\r\n    it('find', async () => {\r\n        const entity1 = {\r\n            id: 'testid',\r\n            name: 'entity1'\r\n        };\r\n        repository.save(entity1);\r\n        const entity2 = {\r\n            id: 'testid1',\r\n            name: 'entity2'\r\n        };\r\n        repository.save(entity2);\r\n        const dbEntities = await repository.find({}, { limit: 2 });\r\n        equal(dbEntities.length, 2);\r\n    });\r\n    it('getDbCollection', () => {\r\n        const dbCollectionName = BaseRepositoryFake.getDbCollection();\r\n        equal(dbCollectionName.collectionName, collectionName);\r\n    });\r\n});\r\n//# sourceMappingURL=BaseRepositoryFake.test.js.map"]}